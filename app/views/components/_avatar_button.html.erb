<div class="dropdown dropdown-end">
  <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
    <div class="w-10 rounded-full">
      <% if current_user.avatar.attached? %>
        <%= image_tag current_user.avatar, alt: current_user.full_name, class: "w-full h-full object-cover" %>
      <% else %>
        <div class="bg-primary text-primary-content font-medium flex items-center justify-center w-full h-full">
          <%= current_user.first_name[0] %>
        </div>
      <% end %>
    </div>
  </div>

  <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52 mt-2">
    <div class="px-4 py-3 border-b border-base-200">
      <div class="font-bold truncate"><%= current_user.full_name %></div>
      <div class="text-xs text-base-content/70 truncate"><%= current_user.email %></div>
    </div>

    <li>
      <%= link_to edit_user_registration_path(current_user) do %>
        <%= lucide_icon('settings', class: 'h-4 w-4') %>
        Account Settings
      <% end %>
    </li>

    <% if current_user.driver.present? %>
      <li>
        <%= link_to driver_path(current_user.driver) do %>
          <%= lucide_icon('car', class: 'h-4 w-4') %>
          Driver Profile
        <% end %>
      </li>

      <li>
        <%= link_to my_rides_path do %>
          <%= lucide_icon('car-taxi-front', class: 'h-4 w-4') %>
          My Trip Offerings
        <% end %>
      </li>
    <% end %>

    <li>
      <%= link_to trips_path do %>
        <%= lucide_icon('calendar', class: 'h-4 w-4') %>
        My Trips
      <% end %>
    </li>

    <div class="divider my-1"></div>

    <li>
      <%= button_to destroy_user_session_path, method: :delete, class: "w-full text-left" do %>
        <div class="flex items-center gap-2 hover:cursor-pointer">
          <%= lucide_icon('log-out', class: 'h-4 w-4') %>
          Sign Out
        </div>
      <% end %>
    </li>
  </ul>
</div>
